<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Lab 10. Upload files</title>
  </head>
  <body>
    <script type="text/javascript">
        function setf()
        {
          const ws = new WebSocket('ws:/localhost:5000');
          ws.on('open', () =>
          {
            console.log("Upload file");
            const duplex = WebSocket.createWebSocketStream(ws, {encoding: 'utf8'});
            let uf = fs.createReadStream(`./file.txt`);
            uf.pipe(duplex);
          })
          .on('error', (e)=> {console.log('WS server error ', e);});
        }
    </script>
    <form enctype="multipart/form-data">
      <input type="file" name="file" class="col-5 offset-2"><br>
      <input type="submit" name="upload" value="Upload" onclick="setf()">
    </form>
  </body>
</html>
