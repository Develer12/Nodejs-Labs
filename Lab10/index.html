<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Lab 10. Star WebSocket</title>
  </head>
  <body>
    <script type="text/javascript">
      let k = 0;
      function startWS()
      {
          let timer = ' ';
          let socket = new WebSocket('ws:/localhost:4000/wsserv');
          socket.onopen = () =>
          {
              console.log('Open socket');
              timer = setInterval(()=>{socket.send(++k)}, 3000);
              setTimeout(() => {clearInterval(timer); socket.close()}, 25000);
          };
          socket.onclose = (e) => {console.log('Close socket ', e)};
          socket.onmessage = (e) => {console.log('Message socket ', e.data)};
          socket.onerror = function(e) {alert("Error: " + error.message)};
      };
    </script>

    <button type="button" name="button" onclick="startWS()">WS Start</button>
  </body>
</html>
